import { Octokit } from '@octokit/rest';

const octokit = new Octokit({ auth: process.env.GITHUB_TOKEN });

const checkApprovals = async () => {
  const { owner, repo, number } = github.context.issue;
  const reviews = await octokit.pulls.listReviews({ owner, repo, pull_number: number });

  const approvals = reviews.data.filter(review => review.state === 'APPROVED');
  const requiredReviewers = getFeatureOwners(pr.head.ref);

  if (approvals.length >= requiredReviewers.length) {
    console.log('All required reviewers have approved the PR.');
  } else {
    console.log('Not all required reviewers have approved the PR.');
  }
};

checkApprovals().catch(err => {
  console.error(err);
  process.exit(1);
});